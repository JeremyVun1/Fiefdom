<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:body>
        <ui:composition template="/template/base.xhtml">
            <!-- side nav bar -->
            <ui:define name="leftnav">
                <ui:include src="/template/leftnavgame.xhtml" />
            </ui:define>

            <ui:define name="content">
                <div class="row justify-content-center">
                    <h1>Buildings</h1>
                </div>

				<!-- Available Resources -->
				<div class="row justify-content-center">
					<h:panelGrid columns="4" border="1" cellpadding = "10">
						<h:panelGroup>Gold: </h:panelGroup>
						<h:panelGroup>#{buildingsMBean.gold}</h:panelGroup>

						<h:panelGroup>Free Land: </h:panelGroup>
						<h:panelGroup>#{buildingsMBean.freeLand}</h:panelGroup>
					</h:panelGrid>
				</div>

				<div class="row justify-content-center">
					<h:outputText id="requiredgold" value="Required Gold: #{buildingsMBean.requiredGold}" />
				</div>
				<div class="row justify-content-center">
					<h:outputText id="requiredfreeland" value="Required Land: #{buildingsMBean.requiredFreeLand}" />
				</div>


                <!-- BUILD BUILDINGS FORM -->
				<div class="row justify-content-center">
					<h:form>
						<div class="form-group">
							<table class="table table-dark">
								<thead>
									<th scope="col">Building</th>
									<th scope="col">Built</th>
									<th scope="col">Unit Cost</th>
									<th scope="col">Amount</th>
									<th scope="col">Total Cost</th>
								</thead>
								<tbody>
									<tr>
										<th scope="row">Farms</th>
										<td>#{buildingsMBean.builtFarms}</td>
										<td>#{buildingsMBean.farmCost}</td>
										<td>
											<h:inputText id="farmstobuild" value="#{buildingsMBean.farmsToBuild}" size="5" maxlength="5">
												<f:ajax listener="#{buildingsMBean.totalFarmsCostChanged}" render="totalfarmscost" />
												<f:ajax listener="#{buildingsMBean.totalCostChanged}" render="requiredgold" />
												<f:ajax listener="#{buildingsMBean.totalLandChanged}" render="requiredfreeland" />
											</h:inputText>
											<h:message for="farmstobuild"/>
										</td>
										<td>
											<h:outputText id="totalfarmscost" value="#{buildingsMBean.totalFarmsCost}" />
										</td>
									</tr>
									<tr>
										<th scope="row">Markets</th>
										<td>#{buildingsMBean.builtMarkets}</td>
										<td>#{buildingsMBean.marketCost}</td>
										<td>
											<h:inputText id="marketstobuild" value="#{buildingsMBean.marketsToBuild}" size="5" maxlength="5">
												<f:ajax listener="#{buildingsMBean.totalMarketsCostChanged}" render="totalmarketscost" />
												<f:ajax listener="#{buildingsMBean.totalCostChanged}" render="requiredgold" />
												<f:ajax listener="#{buildingsMBean.totalLandChanged}" render="requiredfreeland" />
											</h:inputText>
											<h:message for="marketstobuild"/>
										</td>
										<td>
											<h:outputText id="totalmarketscost" value="#{buildingsMBean.totalMarketsCost}" />
										</td>
									</tr>
									<tr>
										<th scope="row">Mines</th>
										<td>#{buildingsMBean.builtMines}</td>
										<td>#{buildingsMBean.mineCost}</td>
										<td>
											<h:inputText id="minestobuild" value="#{buildingsMBean.minesToBuild}" size="5" maxlength="5">
												<f:ajax listener="#{buildingsMBean.totalMinesCostChanged}" render="totalminescost" />
												<f:ajax listener="#{buildingsMBean.totalCostChanged}" render="requiredgold" />
												<f:ajax listener="#{buildingsMBean.totalLandChanged}" render="requiredfreeland" />
											</h:inputText>
											<h:message for="minestobuild"/>
										</td>
										<td>
											<h:outputText id="totalminescost" value="#{buildingsMBean.totalMinesCost}" />
										</td>
									</tr>
									<tr>
										<th scope="row">Towers</th>
										<td>#{buildingsMBean.builtTowers}</td>
										<td>#{buildingsMBean.towerCost}</td>
										<td>
											<h:inputText id="towerstobuild" value="#{buildingsMBean.towersToBuild}" size="5" maxlength="5">
												<f:ajax listener="#{buildingsMBean.totalTowersCostChanged}" render="totaltowerscost" />
												<f:ajax listener="#{buildingsMBean.totalCostChanged}" render="requiredgold" />
												<f:ajax listener="#{buildingsMBean.totalLandChanged}" render="requiredfreeland" />
											</h:inputText>
											<h:message for="towerstobuild"/>
										</td>
										<td>
											<h:outputText id="totaltowerscost" value="#{buildingsMBean.totalTowersCost}" />
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div class="row justify-content-center">
							<h:commandButton id="Build" value="Build" class="btn btn-primary" action="#{buildingsMBean.build()}"/>
						</div>
					</h:form>
				</div>
            </ui:define>

            <ui:define name="footer"></ui:define>

        </ui:composition>
    </h:body>
</html>

